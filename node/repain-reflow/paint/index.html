<button id="btn">click</button>
<div id="root"></div>
<template id="template">
  <div style="position: relative">hello</div>
</template>

<script>
  const root = document.getElementById("root");
  const template = document.getElementById("template");
  [...Array(1000)].forEach(() =>
    root.appendChild(template.content.cloneNode(true))
  );
  const forceRedraw = (element) => {
    if (!element) {
      return;
    }

    const n = document.createTextNode(" ");
    const disp = element.style.display;

    element.appendChild(n);
    element.style.display = "none";

    setTimeout(function () {
      element.style.display = disp;
      n.parentNode.removeChild(n);
    }, 20);
  };
  document.getElementById("btn").addEventListener("click", () => {
    setInterval(() => {
      document.querySelectorAll("div").forEach(forceRedraw);
    }, 100);
  });
</script>
